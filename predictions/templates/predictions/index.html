{% extends "predictions/base.html" %}

{% block content %}

<div class="container">

<header><h1>Redbook Predictions</h1></header>
	
	<div class="row">
		<div class="col-xs-6 col-xs-offset-3">
			<form action="" method="post" class="form-group">
				<table>
					{{ form.as_p }}
				</table>
			{% csrf_token %}
			<input type="submit" value="Submit" class="btn btn-default">
			</form>
		</div>
	</div>

{% if latest_predictions %}
	{% for prediction in latest_predictions %}	
	<div class="row">
		<div class="col-xs-6 col-xs-offset-3" id="prediction-panel">
			<div class="panel panel-default">
				<div class="panel-heading">
					<div class="left">
						{{ prediction.deadline_date }}
					</div>
					<div class="right">
						<form action="{% url 'predictions:vote' prediction.id %}" method="post" class="form-group" id="votes">
							{% csrf_token %}

							<button type="submit" style="border: 0; background: transparent" name="vote" value="thumbs_up">
								{{ prediction.thumbs_up }}
								<span class="glyphicon glyphicon-thumbs-up" alt="submit"></span>
							</button>

							<button type="submit" style="border: 0; background: transparent" name="vote" value="thumbs_down">
								{{ prediction.thumbs_down }}
								<span class="glyphicon glyphicon-thumbs-down" alt="submit"></span>
							</button>
						</form>					
					</div>
				</div>
				<div class="panel-body">
					<a href="{% url 'predictions:detail' prediction.id %}">{{ prediction.prediction_text }}</a>
				</div>
			</div>
		</div>
	</div>
	{% endfor %}

{% else %}
	<p>No predictions made.</p>
{% endif %}
</div>	
{% endblock %}

{% block scripts %}
<script>
	$(document).ready(function() {
	    $('.datepicker').datepicker({
			changeMonth: true,
			changeYear: true,
		});
	});
</script>
{% endblock %}